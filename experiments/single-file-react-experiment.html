<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Budgets</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
	<div id="container">
	</div>
	
	<script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
	<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>

	<script>
		'use strict';

		const e = React.createElement;
		
		class BudgetEntryForm extends React.Component {
			constructor(props) {
				super(props);
			}
			
			render() {
				return e(
					'form',
					{
						onSubmit: (evt) => { console.log("submit"); evt.preventDefault(); }
					},
					[
						e('input', 
							{ 
								key: 'input', 
								type: 'number', 
								defaultValue: "0.00", step: "0.01",
								onChange: () => { console.log("change"); }
							}
						),
						e('input', 
							{ 
								key: 'submit',
								type: 'submit',
								value: 'Eintragen'
							}
						),
						e(BudgetEntries, { key: 'list'} )
					]
				);
			}
		}

		const BudgetEntry = function(props) {
			return e(
				'li',
				{},
				[
					e('span', {key: 'amnt'+props.id}, props.amount),
					' ',
					e('span', {key: 'titl'+props.id}, props.title),
				]
			);
		}

		class BudgetEntries extends React.Component {
			constructor(props) {
				super(props);
				this.state = {
					entries: [
						{ id: 1, amount: -10.25, title: 'A' },
						{ id: 2, amount: -5.67, title: 'B' },
						{ id: 3, amount: -12.45, title: 'C' }
					]
				}
			}
			
			render() {
				return e(
					'ul',
					{ 
						key: 'list',
						onClick: () => this.setState(
							{ entries:
									[...this.state.entries, {
										id: this.state.entries.length,
										amount: Math.floor(Math.random() * 10000) / 100,
										title: Math.random().toString(36).substring(2,7)
									}]
							},
						)
					},
					this.state.entries.map(
						(x, idx) => e(BudgetEntry, { ...x, key: idx} ))
				);
			}
		}
		
		const domContainer = document.querySelector('#container');
		ReactDOM.render(e(BudgetEntryForm), domContainer);
	</script>
</body>
</html>
